package todo;

import done.ClockOutput;

public class SecondThread extends Thread{
	private static ClockOutput	output;
	private long startTime, currentTime;
	private int hh, mm, ss;

	public SecondThread(ClockOutput o) {
		output = o;
		hh = 0;
		mm = 0;
		ss = 58;
	}

	public void run() {
		startTime = System.currentTimeMillis();
	
		while (true) {
			currentTime = System.currentTimeMillis();
			long difference = currentTime - startTime;
			difference = difference / 1000;
			
			if (difference >= 1) {
				startTime += difference * 1000;
				output.showTime(getIncrementedTime());
			}
		}
	}
	
	public void setTime(int hour, int min, int sec) {
		hh = hour;
		mm = min;
		ss = sec;
	}
	
	private int getIncrementedTime() {
		if(++ss == 60) {
			ss = 0;
			if(++mm == 60) {
				mm = 0;
				if(++hh == 24) {
					hh = 0;
				}
			}
		}
		return ss + mm * 100 + hh * 10000;
	}
}
